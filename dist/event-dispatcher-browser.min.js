/*!
 * EventDispatcher
 * @version 1.8.5
 * @author László BULIK
 * @license MIT License
 */
!function(e,t){"use strict";function n(){this.listeners={},this.debug=!1,this.logIndentLevel=0,this.logIndentText="    "}n.prototype.addListener=function(e,t,n,i,s){this.listeners[e]||(this.listeners[e]=[]),"function"==typeof t&&(s=i,i=n,n=t,t=null),"number"!=typeof i&&(s=i,i=0),this.debug&&"string"!=typeof s&&(s=this._getListenerName(t,n));var o,r=this.listeners[e],h={name:s,context:t,method:n,priority:i};for(this.debug&&this.logger({type:"addListener",event:e,listener:h}),o=r.length;o>0&&!(r[o-1].priority>=h.priority);--o);return o===r.length?r.push(h):r.splice(o,0,h),this},n.prototype.removeListener=function(e,t,n){"function"!=typeof t&&"string"!=typeof t||(n=t,t=null);var i=this.listeners[e];if(i)for(var s=i.length-1;s>=0;--s)if(i[s].context===t&&i[s].method===n){this.debug&&this.logger({type:"removeListener",event:e,listener:i[s]}),i.splice(s,1),0===i.length&&delete this.listeners[e];break}return this},n.prototype.getListeners=function(){return this.listeners},n.prototype.dispatch=function(e,t){this.debug&&this.logger({type:"dispatchBegin",event:e,data:t});var n=this.getListeners();if(n=n.hasOwnProperty(e)?n[e]:null)for(var i=0;i<n.length;++i)if("function"==typeof n[i].method)this.debug&&this.logger({type:"call",event:e,listener:n[i],data:t}),n[i].method.call(n[i].context,t);else{if("string"!=typeof n[i].method)throw new TypeError('EventDispatcher: "'+e+'" event handler type mismatch: expected string or function, got '+(null===n[i].method?"null":typeof n[i].method));if("function"!=typeof n[i].context[n[i].method])throw new TypeError('EventDispatcher: Method "'+n[i].method+'" does not exists in this context.');this.debug&&this.logger({type:"call",event:e,listener:n[i],data:t}),n[i].context[n[i].method].call(n[i].context,t)}return this.debug&&this.logger({type:"dispatchEnd",event:e,data:t}),this},n.prototype.logger="undefined"!=typeof console&&console.log?function(e){var t;switch(e.type){case"addListener":t='Adding listener "'+e.listener.name+'" to listen for "'+e.event+'".';break;case"removeListener":t='Removing listener "'+e.listener.name+'".';break;case"dispatchBegin":t='Dispatching "'+e.event+'".',++this.logIndentLevel;break;case"dispatchEnd":t='Finished dispatching "'+e.event+'".',--this.logIndentLevel;break;case"call":t="string"==typeof e.listener.method?'Calling "'+e.listener.name+'" by string.':'Calling "'+e.listener.name+'" by reference.';break;default:t="Unknow event."}console.log("EventDispatcher: "+Array(("dispatchBegin"===e.type?this.logIndentLevel-1:this.logIndentLevel)+1).join(this.logIndentText)+t)}:function(){};var i=/function ([^(]+)\W*\(/i;n.prototype._getListenerName=function(e,t){var n,s,o="",r=e?e.constructor.toString().match(i):null,h=r?r[1]:e?"anonymous":"";if("string"==typeof t)n=t,h&&(o="#");else if(e){for(var l in e)if(e[l]===t){n=l,h&&(o="#");break}n||((s=t.toString().match(i))?(n=s[1],o="~"):(this._LNAI||(this._LNAI=1),n="anonymous("+this._LNAI++ +")"))}else"function"==typeof t&&(s=t.toString().match(i))?n=s[1]:(this._LNAI||(this._LNAI=1),n="anonymous("+this._LNAI++ +")");return h+o+n};var s=e.EventDispatcher;n.noConflict=function(){return e.EventDispatcher=s,s=t,n.noConflict=function(){return this},this},e.EventDispatcher=n}(window);